#!/usr/bin/env bash

INSTALL_DIR="$HOME/bin"
if [ "$(uname)" == "Darwin" ]; then
    INSTALL_DIR="/usr/local"
fi

echo "We'll be uninstalling hoard ($INSTALL_DIR/bin/hoard) and all related files. [ctrl-c to cancel]"
sleep 3

(rm $INSTALL_DIR/bin/hoard >> /dev/null 2>&1 && echo "Uninstalled 'hoard' previously located at $INSTALL_DIR/bin/hoard")

file=
if [ -f "$HOME/.bashrc" ]; then
    file="$HOME/.bashrc"
elif [ -f "$HOME/.bash_profile" ]; then
    file="$HOME/.bash_profile"
fi

rm ~/.hoard_sessions >> /dev/null 2>&1

if [[ -z "$file" ]]; then
    echo "We've removed everything related to hoard."
    echo "However, please remove '. hoard' from your .bashrc file or equivalent if you added that manually."
else
    sed -i '' "/\. hoard$/g" "$file"
    echo "We've removed everything related to 'hoard',"
    echo "and it should not be usable in subsequent terminal sessions."
fi
